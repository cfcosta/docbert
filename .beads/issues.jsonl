{"id":"docbert-129","title":"Tantivy Indexing and BM25 Search","description":"Implement the Tantivy-based inverted index for BM25 and fuzzy first-stage retrieval. Includes schema definition, document ingestion, incremental indexing, and query execution.","status":"closed","priority":1,"issue_type":"epic","owner":"me@cfcosta.com","created_at":"2026-02-04T14:21:24.724492046-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:10:16.467744394-03:00","closed_at":"2026-02-04T15:10:16.467744394-03:00","close_reason":"Closed"}
{"id":"docbert-1lf","title":"Investigate Jina ColBERT v2 long-doc settings","description":"Validate PyLate sliding-window behavior for long documents, and determine recommended doc_maxlen (300 vs higher) from Jina guidance or benchmarks.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T16:48:15.542783331-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T18:00:22.933479313-03:00","closed_at":"2026-02-06T18:00:22.933479313-03:00","close_reason":"Investigation completed; findings documented"}
{"id":"docbert-20g","title":"Document chunking for long documents","description":"Large documents are embedded as a single unit and silently truncated at ~512 tokens. Implement sliding window chunking to properly handle long documents and improve passage-level search.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T23:41:24.431370062-03:00","created_by":"Cainã Costa","updated_at":"2026-02-05T00:35:20.257604413-03:00","closed_at":"2026-02-05T00:35:20.257604413-03:00","close_reason":"Added chunking module with sliding window support, integrated into rebuild and sync commands"}
{"id":"docbert-260","title":"Implement collection remove command","description":"Implement 'docbert collection remove \u003cname\u003e'. Remove the collection definition from config.redb. Delete all document_metadata entries for this collection. Delete all embeddings for documents in this collection. Delete all Tantivy entries for documents in this collection. Delete context if exists. Print summary of what was removed.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:36.034173455-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:56.91254319-03:00","closed_at":"2026-02-04T15:01:56.91254319-03:00","close_reason":"Implemented collection_remove() with Tantivy cleanup, embedding deletion, metadata cleanup","dependencies":[{"issue_id":"docbert-260","depends_on_id":"docbert-2bk","type":"blocks","created_at":"2026-02-04T14:22:53.910784995-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-260","depends_on_id":"docbert-m8i","type":"blocks","created_at":"2026-02-04T14:25:12.996424954-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-260","depends_on_id":"docbert-82e","type":"blocks","created_at":"2026-02-04T14:25:13.086467259-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-28o","title":"Implement collection list command","description":"Implement 'docbert collection list'. Query config.redb for all collection definitions. Count documents per collection from document_metadata. Display as a table (name, path, document count). Support --json flag for structured output.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:38.658533529-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:56.956670748-03:00","closed_at":"2026-02-04T15:01:56.956670748-03:00","close_reason":"Implemented collection_list() with plain and JSON output","dependencies":[{"issue_id":"docbert-28o","depends_on_id":"docbert-2bk","type":"blocks","created_at":"2026-02-04T14:22:53.953066824-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-2bk","title":"Implement collection add command","description":"Implement 'docbert collection add \u003cpath\u003e --name \u003cname\u003e'. Validate the directory exists and is readable. Resolve path to absolute. Store collection definition (name -\u003e path) in config.redb collections table. Print success message. Prevent duplicate collection names.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:31.443146887-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:53:13.864936812-03:00","closed_at":"2026-02-04T14:53:13.864936812-03:00","close_reason":"Implemented collection add: validates directory exists, resolves to absolute path, checks for duplicates, stores in config.redb","dependencies":[{"issue_id":"docbert-2bk","depends_on_id":"docbert-q53","type":"blocks","created_at":"2026-02-04T14:25:10.701083965-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-2bk","depends_on_id":"docbert-bh2","type":"blocks","created_at":"2026-02-04T14:25:10.800918244-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-2bk","depends_on_id":"docbert-yuh","type":"blocks","created_at":"2026-02-04T14:25:10.901208149-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-3g2","title":"Add pylate-rs dependency and model loading","description":"Add pylate-rs 1.0 to Cargo.toml with appropriate feature flags (default CPU, optional mkl/accelerate/metal/cuda). Implement a ModelManager struct that lazily loads the ColBERT model on first use. Default model: lightonai/GTE-ModernColBERT-v1. Support override via DOCBERT_MODEL env var or settings in config.redb. Handle model download from HuggingFace Hub.","status":"closed","priority":0,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:31.812138967-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:51:39.036872747-03:00","closed_at":"2026-02-04T14:51:39.036872747-03:00","close_reason":"Implemented ModelManager with lazy ColBERT loading, DOCBERT_MODEL env var override, candle-core dependency for Device/Tensor types, ColbertError variant in error enum","dependencies":[{"issue_id":"docbert-3g2","depends_on_id":"docbert-hw7","type":"parent-child","created_at":"2026-02-04T14:23:21.199471031-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-3g2","depends_on_id":"docbert-79s","type":"blocks","created_at":"2026-02-04T14:25:11.205653941-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-3g2","depends_on_id":"docbert-hde","type":"blocks","created_at":"2026-02-04T14:25:11.300439024-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-3jp","title":"Add tantivy dependency and define index schema","description":"Add tantivy 0.25 to Cargo.toml. Define the Tantivy schema with fields: doc_id (STRING, STORED), doc_num_id (u64, STORED, FAST), collection (STRING, STORED, FAST), path (STRING, STORED), title (TEXT, STORED), body (TEXT), mtime (u64, STORED, FAST). Register en_stem tokenizer for title and body fields. Create a TantivyIndex struct that manages index creation, opening, and reader/writer lifecycle.","status":"closed","priority":0,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:32.480187228-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:45:46.904530641-03:00","closed_at":"2026-02-04T14:45:46.904530641-03:00","close_reason":"Implemented SearchIndex with Tantivy schema, en_stem tokenizer, BM25 search with title boost, collection filtering, document CRUD, and disk persistence","dependencies":[{"issue_id":"docbert-3jp","depends_on_id":"docbert-129","type":"parent-child","created_at":"2026-02-04T14:23:01.445794135-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-3jp","depends_on_id":"docbert-79s","type":"blocks","created_at":"2026-02-04T14:25:10.999639297-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-3jp","depends_on_id":"docbert-hde","type":"blocks","created_at":"2026-02-04T14:25:11.105086797-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-3pg","title":"Document semantic-only search","description":"Update docs and README for ssearch/semantic_search behavior, performance caveats, and usage.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-08T12:02:14.317518024-03:00","created_by":"Cainã Costa","updated_at":"2026-02-08T12:16:28.084204515-03:00","closed_at":"2026-02-08T12:16:28.084204515-03:00","close_reason":"Completed"}
{"id":"docbert-3rb","title":"Collection Management","description":"Implement the collection subcommand: adding, removing, and listing document collections backed by filesystem directories.","status":"closed","priority":1,"issue_type":"epic","owner":"me@cfcosta.com","created_at":"2026-02-04T14:21:24.618536666-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:10:16.469294735-03:00","closed_at":"2026-02-04T15:10:16.469294735-03:00","close_reason":"Closed"}
{"id":"docbert-44b","title":"Add jina-colbert-v2 model workflow","description":"Add model config path + helper to prep Jina ColBERT v2 for pylate-rs, update docs, ensure model resolution uses config/env.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T16:04:56.710489803-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T16:09:59.134550413-03:00","closed_at":"2026-02-06T16:09:59.134550413-03:00","close_reason":"Completed"}
{"id":"docbert-4dv","title":"Implement model-derived chunking params for pylate-rs","description":"Use document_length from config_sentence_transformers.json to drive docbert chunk size/overlap and align with pylate-rs truncation. Update docs/tests.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T18:00:13.519712829-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T18:19:32.806433355-03:00","closed_at":"2026-02-06T18:19:32.806433355-03:00","close_reason":"Completed"}
{"id":"docbert-4ng","title":"Core Infrastructure","description":"Set up the foundational project structure, error handling, configuration, and storage layer that all other features depend on.","status":"closed","priority":0,"issue_type":"epic","owner":"me@cfcosta.com","created_at":"2026-02-04T14:21:14.805943454-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:10:16.460477371-03:00","closed_at":"2026-02-04T15:10:16.460477371-03:00","close_reason":"Closed"}
{"id":"docbert-52v","title":"Use bytemuck for zero-copy embedding serialization","description":"embedding_db.rs:61-64 (store) and 95-98 (load) convert f32 values one at a time via to_le_bytes/from_le_bytes in a loop. Use bytemuck::cast_slice for zero-copy reinterpretation between \u0026[f32] and \u0026[u8], eliminating per-element iteration. This affects both ingestion throughput and per-query latency when loading candidate embeddings.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:05:05.112525259-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:14:53.810898072-03:00","closed_at":"2026-02-04T16:14:53.810898072-03:00","close_reason":"Replaced per-element f32 serialization loops with bytemuck::cast_slice for bulk copy_from_slice in store(), batch_store(), and load()."}
{"id":"docbert-56d","title":"Fix docbert-cuda nix build: set CUDA_COMPUTE_CAP to avoid nvidia-smi requirement in sandbox","status":"closed","priority":0,"issue_type":"bug","owner":"me@cfcosta.com","created_at":"2026-02-04T16:47:48.448282062-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T18:08:48.593395983-03:00","closed_at":"2026-02-04T18:08:48.593395983-03:00","close_reason":"Closed"}
{"id":"docbert-57v","title":"Add tracing/logging infrastructure","description":"Add tracing and tracing-subscriber as dependencies. Set up a subscriber that respects the --verbose/-v and --quiet/-q flags and the DOCBERT_LOG env var. Use info level by default, debug with -v, trace with -vv, warn with -q.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:53.722847422-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:10:06.920151815-03:00","closed_at":"2026-02-04T15:10:06.920151815-03:00","close_reason":"Closed"}
{"id":"docbert-5f4","title":"Fix N+1 metadata fetching in collection operations","description":"main.rs:175-184, 518-538, 306-345 all call list_document_ids() then get_document_metadata() per ID in a loop. For 10k docs that's ~10k separate DB reads. Add a collection-indexed scan or load all metadata once and filter in memory.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:05:04.516204796-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:08:52.550344368-03:00","closed_at":"2026-02-04T16:08:52.550344368-03:00","close_reason":"Added list_all_document_metadata() bulk read method to ConfigDb. Refactored all 6 N+1 call sites in main.rs and incremental.rs to use single-transaction scans. Merged two separate loops in cmd_rebuild into one pass."}
{"id":"docbert-5n8","title":"Add MCP stdio integration tests for get/resource","description":"Optional follow-up: extend MCP stdio integration tests to cover docbert_get and resource read flows.","status":"closed","priority":4,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T01:20:52.684668156-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T01:27:54.476112311-03:00","closed_at":"2026-02-06T01:27:54.476112311-03:00","close_reason":"Completed"}
{"id":"docbert-5qz","title":"Fix quality gate: cargo format command missing","description":"cargo format failed (no such command). Either install cargo-format alias or update documented quality gate to use cargo fmt.","status":"closed","priority":0,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-08T12:15:27.47009411-03:00","created_by":"Cainã Costa","updated_at":"2026-02-08T12:19:32.177217444-03:00","closed_at":"2026-02-08T12:19:32.177217444-03:00","close_reason":"Closed per user request"}
{"id":"docbert-60r","title":"Match pylate-rs chunk sizing to minimize chunks","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T00:13:35.415546613-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T00:20:22.614235739-03:00","closed_at":"2026-02-06T00:20:22.614235739-03:00","close_reason":"Completed"}
{"id":"docbert-6bk","title":"Implement incremental indexing logic","description":"Compare discovered files against document_metadata in config.redb. Classify each file as: new (not in metadata), changed (mtime differs), unchanged, or deleted (in metadata but not on disk). Return the sets of files to add, update, and delete. This is the core logic that collection add uses after initial indexing.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:42.58446975-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:59:24.260392944-03:00","closed_at":"2026-02-04T14:59:24.260392944-03:00","close_reason":"Implemented incremental indexing: diff_collection() compares discovered files vs stored metadata, classifies new/changed/deleted, DocumentMetadata serialization, 6 tests","dependencies":[{"issue_id":"docbert-6bk","depends_on_id":"docbert-o60","type":"blocks","created_at":"2026-02-04T14:22:53.994771866-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-6bx","title":"Wire CUDA device selection through to model_manager","description":"model_manager.rs:61 hardcodes Device::Cpu. When built with the cuda feature, the model should use Device::Cuda(0) instead. The docbert-cuda nix package provides cudatoolkit and cudnn but the runtime never uses them. Add conditional compilation: #[cfg(feature = \"cuda\")] to select the appropriate device.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:05:05.01279805-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:11:25.631085888-03:00","closed_at":"2026-02-04T16:11:25.631085888-03:00","close_reason":"Added default_device() function with cfg(feature) conditional compilation for cuda, metal, and CPU fallback. Model now auto-selects CUDA GPU when built with cuda feature."}
{"id":"docbert-79s","title":"Set up XDG data directory management","description":"Use the xdg crate to resolve the data directory (~/.local/share/docbert/). Create a DataDir struct that provides methods to get paths for config.redb, embeddings.redb, and the tantivy/ subdirectory. Support override via DOCBERT_DATA_DIR env var and --data-dir CLI flag. Ensure directories are created on first use.","status":"closed","priority":0,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:34.98813009-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:34:33.650789204-03:00","closed_at":"2026-02-04T14:34:33.650789204-03:00","close_reason":"Implemented DataDir struct with XDG resolution, env var override, and explicit path support in src/data_dir.rs"}
{"id":"docbert-7rf","title":"Implement JSON search output","description":"Format search results as JSON when --json flag is set. Output a JSON object with fields: query (string), result_count (int), results (array of objects with rank, score, doc_id, collection, path, title, snippet). Use serde_json for serialization.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:23:59.763708571-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:56.82469642-03:00","closed_at":"2026-02-04T15:01:56.82469642-03:00","close_reason":"Implemented JSON output in search::format_json()","dependencies":[{"issue_id":"docbert-7rf","depends_on_id":"docbert-cne","type":"blocks","created_at":"2026-02-04T14:24:17.109393288-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-7rf","depends_on_id":"docbert-qw4","type":"parent-child","created_at":"2026-02-04T14:24:27.400633806-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-7yz","title":"Add MCP stdio integration test","description":"Optional follow-up: add an integration test that spins up docbert mcp over stdio and exercises a simple search call using rmcp client.","status":"closed","priority":4,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T01:12:50.326607062-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T01:19:37.380993058-03:00","closed_at":"2026-02-06T01:19:37.380993058-03:00","close_reason":"Completed"}
{"id":"docbert-7zx","title":"Implement context list command","description":"Implement 'docbert context list'. Query all entries from the contexts table in config.redb. Display as a table (URI, description). Support --json flag.","status":"closed","priority":3,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:23:58.986236906-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:57.085855684-03:00","closed_at":"2026-02-04T15:01:57.085855684-03:00","close_reason":"Implemented context_list() with plain and JSON output","dependencies":[{"issue_id":"docbert-7zx","depends_on_id":"docbert-bh2","type":"blocks","created_at":"2026-02-04T14:25:12.786049788-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-7zx","depends_on_id":"docbert-q53","type":"blocks","created_at":"2026-02-04T14:25:12.895294463-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-82e","title":"Implement embedding deletion","description":"Implement removal of embeddings from embeddings.redb. Delete by document numeric ID. Support bulk deletion for collection removal. Provide a method to list all stored document IDs for a given collection (requires cross-referencing with document_metadata in config.redb).","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:45.798969341-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:53:55.652889906-03:00","closed_at":"2026-02-04T14:53:55.652889906-03:00","close_reason":"Already implemented in docbert-odt: EmbeddingDb::remove() for deletion by doc ID, list_ids() for listing all stored IDs. Bulk deletion can be done by iterating list_ids and calling remove.","dependencies":[{"issue_id":"docbert-82e","depends_on_id":"docbert-3g2","type":"blocks","created_at":"2026-02-04T14:23:04.940177102-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-82e","depends_on_id":"docbert-hw7","type":"parent-child","created_at":"2026-02-04T14:23:21.215102367-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-8al","title":"Implement document embedding computation","description":"Implement encoding documents into ColBERT embeddings. Use model.encode(\u0026documents, false) for documents. Handle documents exceeding model max length by chunking on paragraph boundaries. Apply optional hierarchical pooling (configurable pool_factor, default 1). Serialize the resulting [num_tokens, 128] matrix into the binary format (u32 LE token count + u32 LE dim + f32 LE data) and store in embeddings.redb.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:35.00415469-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:57:10.560819661-03:00","closed_at":"2026-02-04T14:57:10.560819661-03:00","close_reason":"Implemented document embedding: embed_and_store() bridges ModelManager to EmbeddingDb, load_embedding_tensor() converts back, tensor_to_flat_f32 helper, 2 tests","dependencies":[{"issue_id":"docbert-8al","depends_on_id":"docbert-3g2","type":"blocks","created_at":"2026-02-04T14:23:04.629716646-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-8al","depends_on_id":"docbert-hw7","type":"parent-child","created_at":"2026-02-04T14:23:21.204751146-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-8al","depends_on_id":"docbert-o60","type":"blocks","created_at":"2026-02-04T14:25:11.890958035-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-8i1","title":"Investigate dependabot security alert","description":"GitHub reported a low severity vulnerability on the default branch (dependabot alert #1). Review the alert and decide on upgrades/mitigations.","status":"open","priority":3,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-08T12:20:00.734450736-03:00","created_by":"Cainã Costa","updated_at":"2026-02-08T12:20:00.734450736-03:00"}
{"id":"docbert-8qu","title":"Implement BM25 search query execution","description":"Implement searching the Tantivy index with BM25 scoring. Build a QueryParser targeting title (2x boost) and body fields. Use parse_query_lenient for robustness. Support collection filtering via BooleanQuery. Return top-K results (default 1000 for reranking, configurable) as a list of (score, doc_num_id, doc_address) tuples.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:39.220515558-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:53:43.712884315-03:00","closed_at":"2026-02-04T14:53:43.712884315-03:00","close_reason":"Already implemented in docbert-3jp: SearchIndex::search() and search_in_collection() with BM25, title 2x boost, lenient parsing, collection filter via BooleanQuery, configurable top-K","dependencies":[{"issue_id":"docbert-8qu","depends_on_id":"docbert-3jp","type":"blocks","created_at":"2026-02-04T14:22:58.15646996-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-8qu","depends_on_id":"docbert-129","type":"parent-child","created_at":"2026-02-04T14:23:01.525556714-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-a0p","title":"Context Management","description":"Implement the docbert context subcommand for adding, removing, and listing context descriptions for collections.","status":"closed","priority":3,"issue_type":"epic","owner":"me@cfcosta.com","created_at":"2026-02-04T14:21:25.11254804-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:10:16.472452584-03:00","closed_at":"2026-02-04T15:10:16.472452584-03:00","close_reason":"Closed"}
{"id":"docbert-acl","title":"Implement context add command","description":"Implement 'docbert context add \u003curi\u003e \u003cdescription\u003e'. Parse the bert:// URI to extract the collection name. Validate the collection exists. Store the context string in config.redb contexts table. Overwrite if already exists.","status":"closed","priority":3,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:23:55.08310681-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:56.99875468-03:00","closed_at":"2026-02-04T15:01:56.99875468-03:00","close_reason":"Implemented context_add() storing in config.redb","dependencies":[{"issue_id":"docbert-acl","depends_on_id":"docbert-bh2","type":"blocks","created_at":"2026-02-04T14:25:12.3916381-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-acl","depends_on_id":"docbert-q53","type":"blocks","created_at":"2026-02-04T14:25:12.48078914-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-agg","title":"Fix clippy warning in chunking config resolver","description":"Address clippy::collapsible_if in chunking::resolve_chunking_config.","status":"closed","priority":0,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T18:19:26.020148457-03:00","created_by":"Cainã Costa","updated_at":"2026-02-08T10:56:50.313344661-03:00","closed_at":"2026-02-08T10:56:50.313344661-03:00","close_reason":"Fixed clippy warning"}
{"id":"docbert-alp","title":"Implement file-list search output","description":"Format search results as plain file paths when --files flag is set. Output one absolute file path per line (resolve relative path through collection directory). Useful for piping to other tools (xargs, fzf, etc.).","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:24:02.766626398-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:56.868184893-03:00","closed_at":"2026-02-04T15:01:56.868184893-03:00","close_reason":"Implemented file-list output in search::format_files()","dependencies":[{"issue_id":"docbert-alp","depends_on_id":"docbert-cne","type":"blocks","created_at":"2026-02-04T14:24:17.200537662-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-alp","depends_on_id":"docbert-qw4","type":"parent-child","created_at":"2026-02-04T14:24:27.4966339-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-atg","title":"Implement status command","description":"Implement 'docbert status' to show system info: data directory path, model name, pool factor, per-collection stats (doc count, embedding size), and totals. Support --json flag.","status":"closed","priority":3,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:25:21.943322498-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:57.173509594-03:00","closed_at":"2026-02-04T15:01:57.173509594-03:00","close_reason":"Implemented cmd_status() with data dir, model, collection/doc counts, JSON mode","dependencies":[{"issue_id":"docbert-atg","depends_on_id":"docbert-bh2","type":"blocks","created_at":"2026-02-04T14:25:25.640252089-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-atg","depends_on_id":"docbert-q53","type":"blocks","created_at":"2026-02-04T14:25:25.680869013-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-awh","title":"Derive chunk sizing from model config","description":"Chunking defaults are hardcoded to the GTE-ModernColBERT config (300 tokens). When DOCBERT_MODEL points to a different model, read config_sentence_transformers.json (like pylate-rs) to set chunk size/overlap based on query_length/document_length.","status":"closed","priority":3,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T00:21:55.071000829-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T00:28:01.696799875-03:00","closed_at":"2026-02-06T00:28:01.696799875-03:00","close_reason":"No longer needed"}
{"id":"docbert-b5s","title":"Add search tests for collection filtering, score thresholds, and result ordering","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:33:51.587683965-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:42:11.149953912-03:00","closed_at":"2026-02-04T16:42:11.149953912-03:00","close_reason":"Closed"}
{"id":"docbert-b8x","title":"Implement rebuild command","description":"Implement 'docbert rebuild' to re-index all collections from scratch. Support -c to rebuild a single collection, --embeddings-only to only recompute ColBERT embeddings, --index-only to only rebuild the Tantivy index. Delete existing entries before re-processing.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:25:21.847545902-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:09:15.597504232-03:00","closed_at":"2026-02-04T15:09:15.597504232-03:00","close_reason":"Closed","dependencies":[{"issue_id":"docbert-b8x","depends_on_id":"docbert-bh2","type":"blocks","created_at":"2026-02-04T14:25:25.508029878-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-b8x","depends_on_id":"docbert-tx3","type":"blocks","created_at":"2026-02-04T14:25:25.552365996-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-b8x","depends_on_id":"docbert-8al","type":"blocks","created_at":"2026-02-04T14:25:25.596875044-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-bh2","title":"Set up CLI skeleton with clap derive","description":"Restructure the existing clap Options enum into a proper CLI with subcommands: collection (add/remove/list), context (add/remove/list), search, get, multi-get, rebuild, status. Define the argument structs for each subcommand per docs/cli.md. Add global options: --data-dir, --verbose, --quiet, --json.","status":"closed","priority":0,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:46.291584279-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:35:56.341731327-03:00","closed_at":"2026-02-04T14:35:56.341731327-03:00","close_reason":"Implemented full CLI skeleton with all subcommands and options per docs/cli.md","dependencies":[{"issue_id":"docbert-bh2","depends_on_id":"docbert-hde","type":"blocks","created_at":"2026-02-04T14:23:05.591043994-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-buh","title":"Batch MaxSim reranking across candidates","description":"reranker.rs:32-43 loads and scores each candidate document one at a time in a loop. Batch-load embeddings and compute MaxSim scores in a single batched matmul or use pylate-rs similarity() for batch operations.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:05:04.917694101-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:13:52.036994142-03:00","closed_at":"2026-02-04T16:13:52.036994142-03:00","close_reason":"Parallelized embedding load + MaxSim scoring across candidates using rayon par_iter in rerank()."}
{"id":"docbert-bvd","title":"Add ssearch CLI command for semantic-only search","description":"Implement a new ssearch command that runs ColBERT-only search across all documents without BM25/fuzzy.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-08T12:02:05.636818286-03:00","created_by":"Cainã Costa","updated_at":"2026-02-08T12:16:28.080741788-03:00","closed_at":"2026-02-08T12:16:28.080741788-03:00","close_reason":"Completed"}
{"id":"docbert-bxq","title":"Refactor reranker to use pylate-rs similarity instead of manual MaxSim implementation","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T18:24:38.384709318-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T18:30:34.228953827-03:00","closed_at":"2026-02-04T18:30:34.228953827-03:00","close_reason":"Closed"}
{"id":"docbert-c9f","title":"Deduplicate repeated metadata scans in cmd_rebuild","description":"main.rs:498-538 calls config_db.list_document_ids() multiple times over the same data. Load once into a local collection and reuse across the cleanup phases.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:05:04.821485529-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:13:10.519163868-03:00","closed_at":"2026-02-04T16:13:10.519163868-03:00","close_reason":"Already resolved by docbert-5f4 (N+1 fix). The two separate metadata scans were merged into a single list_all_document_metadata() call during that work."}
{"id":"docbert-ce5","title":"Docbert MCP server","description":"Add a Model Context Protocol (MCP) server for docbert, modeled after qmd: stdio server, search/get/multi_get/status tools, bert:// resources, prompt guidance, and docs/tests.","status":"closed","priority":2,"issue_type":"epic","owner":"me@cfcosta.com","created_at":"2026-02-06T00:46:05.502980736-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T01:10:58.7048942-03:00","closed_at":"2026-02-06T01:10:58.7048942-03:00","close_reason":"Completed"}
{"id":"docbert-ce5.1","title":"MCP server entrypoint + search tool","description":"Add rmcp/tokio deps, new docbert mcp subcommand, MCP server scaffold, and docbert_search tool with structured results (including context/snippet). Add unit tests for search tool output.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T00:46:11.072399109-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T00:55:33.965618185-03:00","closed_at":"2026-02-06T00:55:33.965618185-03:00","close_reason":"Completed","dependencies":[{"issue_id":"docbert-ce5.1","depends_on_id":"docbert-ce5","type":"parent-child","created_at":"2026-02-06T00:46:11.072986643-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-ce5.2","title":"MCP document retrieval tools + resource","description":"Implement MCP document retrieval: docbert_get and docbert_multi_get tools, bert:// resource reading, line-range and size limits. Add tests for get/multi_get + resource handling.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T00:46:20.886215327-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T01:04:26.598003199-03:00","closed_at":"2026-02-06T01:04:26.598003199-03:00","close_reason":"Completed","dependencies":[{"issue_id":"docbert-ce5.2","depends_on_id":"docbert-ce5","type":"parent-child","created_at":"2026-02-06T00:46:20.886807961-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-ce5.2","depends_on_id":"docbert-ce5.1","type":"blocks","created_at":"2026-02-06T00:46:29.133485205-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-ce5.3","title":"MCP status tool + prompt + docs","description":"Add docbert_status tool and MCP query prompt guidance; document MCP usage in README and docs/cli (Claude Desktop/Code config examples). Add lightweight tests for status/prompt metadata.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T00:46:24.392087659-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T01:09:58.245452435-03:00","closed_at":"2026-02-06T01:09:58.245452435-03:00","close_reason":"Completed","dependencies":[{"issue_id":"docbert-ce5.3","depends_on_id":"docbert-ce5","type":"parent-child","created_at":"2026-02-06T00:46:24.392849099-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-ce5.3","depends_on_id":"docbert-ce5.1","type":"blocks","created_at":"2026-02-06T00:46:32.581289207-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-cfl","title":"Implement context remove command","description":"Implement 'docbert context remove \u003curi\u003e'. Parse the URI, delete the context entry from config.redb. Error if not found.","status":"closed","priority":3,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:23:57.064634333-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:57.041809755-03:00","closed_at":"2026-02-04T15:01:57.041809755-03:00","close_reason":"Implemented context_remove() with not-found error","dependencies":[{"issue_id":"docbert-cfl","depends_on_id":"docbert-bh2","type":"blocks","created_at":"2026-02-04T14:25:12.583812037-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-cfl","depends_on_id":"docbert-q53","type":"blocks","created_at":"2026-02-04T14:25:12.684908688-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-cne","title":"Implement search command orchestration","description":"Implement the core docbert search command handler. Parse the query string and options (-n, -c, --min-score, --all, --bm25-only, --no-fuzzy). Orchestrate the pipeline: call Tantivy BM25 search, then ColBERT reranking (unless --bm25-only), then filter by --min-score, then limit to -n results. Pass results to the formatter.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:23:55.464425867-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:56.737217099-03:00","closed_at":"2026-02-04T15:01:56.737217099-03:00","close_reason":"Implemented full search pipeline: BM25 first-stage, ColBERT reranking, min-score filter, result limiting, --bm25-only mode","dependencies":[{"issue_id":"docbert-cne","depends_on_id":"docbert-qw4","type":"parent-child","created_at":"2026-02-04T14:24:27.198916751-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-cne","depends_on_id":"docbert-8qu","type":"blocks","created_at":"2026-02-04T14:25:11.396739137-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-cne","depends_on_id":"docbert-z6q","type":"blocks","created_at":"2026-02-04T14:25:11.495762771-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-cne","depends_on_id":"docbert-bh2","type":"blocks","created_at":"2026-02-04T14:25:11.59267439-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-d4c","title":"Add clap shell completions to nix package","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T21:57:47.084705812-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T22:15:42.2347212-03:00","closed_at":"2026-02-04T22:15:42.2347212-03:00","close_reason":"Added clap_complete integration and postInstall hook in nix flake"}
{"id":"docbert-fr8","title":"Investigate GitHub vulnerability alerts","description":"GitHub reported 1 moderate and 1 low dependabot vulnerability on default branch. Investigate affected dependencies and update/mitigate as needed.","status":"closed","priority":3,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T01:28:55.512088405-03:00","created_by":"Cainã Costa","updated_at":"2026-02-06T01:31:39.123709092-03:00","closed_at":"2026-02-06T01:31:39.123709092-03:00","close_reason":"Closed"}
{"id":"docbert-g0f","title":"Add hf-hub fetch for remote config_sentence_transformers.json","description":"If model_id is a HF repo, optionally fetch config_sentence_transformers.json to derive document_length/ chunk size.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T18:19:17.901677227-03:00","created_by":"Cainã Costa","updated_at":"2026-02-08T11:04:23.86037287-03:00","closed_at":"2026-02-08T11:04:23.86037287-03:00","close_reason":"Implemented hf-hub fetch for remote chunking config"}
{"id":"docbert-hde","title":"Set up error handling with thiserror","description":"Add thiserror as a dependency. Define a top-level DocbertError enum with variants for: Io, Redb, Tantivy, Colbert, Config, and NotFound. Implement Display and Error. Use this throughout the codebase instead of anyhow.","status":"closed","priority":0,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:31.319142597-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:34:33.605008977-03:00","closed_at":"2026-02-04T14:34:33.605008977-03:00","close_reason":"Implemented DocbertError enum with thiserror in src/error.rs"}
{"id":"docbert-hw7","title":"ColBERT Embedding and Reranking","description":"Integrate pylate-rs for ColBERT embedding computation, store embeddings in redb, and implement the MaxSim reranking pipeline.","status":"closed","priority":1,"issue_type":"epic","owner":"me@cfcosta.com","created_at":"2026-02-04T14:21:24.821483487-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:10:16.465869086-03:00","closed_at":"2026-02-04T15:10:16.465869086-03:00","close_reason":"Closed"}
{"id":"docbert-i0d","title":"Avoid string cloning in embedding computation","description":"Documents are cloned before embedding (embedding.rs:17). Change embed_and_store to accept \u0026[(u64, \u0026str)] instead of owned strings to reduce memory allocations.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T23:41:24.284360035-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T23:45:13.024230155-03:00","closed_at":"2026-02-04T23:45:13.024230155-03:00","close_reason":"Changed embed_and_store to take ownership of Vec instead of reference, avoiding clone via unzip"}
{"id":"docbert-iru","title":"Investigate slow rebuild performance (50s+ even with CUDA)","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T19:13:10.775402672-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T22:08:10.082994077-03:00","closed_at":"2026-02-04T22:08:10.082994077-03:00","close_reason":"Fixed by adding incremental sync command (docbert-j0t)"}
{"id":"docbert-j0t","title":"Add sync command for incremental embedding updates","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T21:57:46.984866077-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T22:08:06.199748346-03:00","closed_at":"2026-02-04T22:08:06.199748346-03:00","close_reason":"Implemented sync command for incremental embedding updates"}
{"id":"docbert-l0q","title":"Implement docbert get command","description":"Implement 'docbert get \u003creference\u003e'. Support three reference formats: path (e.g. meetings/2024-01-15.md), doc ID with hash prefix (#abc123), and collection-qualified path (notes:file.md). Look up the document in config.redb metadata, resolve the absolute file path, read and print the content. Support --json (output as JSON with metadata), --meta (print only metadata), --full (default, print content).","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:23:55.103846389-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:57.128608991-03:00","closed_at":"2026-02-04T15:01:57.128608991-03:00","close_reason":"Implemented cmd_get() with path, #doc_id, and collection:path reference formats, --json/--meta/--full modes","dependencies":[{"issue_id":"docbert-l0q","depends_on_id":"docbert-bh2","type":"blocks","created_at":"2026-02-04T14:25:11.991578748-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-l0q","depends_on_id":"docbert-q53","type":"blocks","created_at":"2026-02-04T14:25:12.086350721-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-ldt","title":"Implement query embedding computation","description":"Implement encoding queries into ColBERT embeddings. Use model.encode(\u0026[query], true) for queries. This produces a [32, 128] matrix (padded with MASK tokens). Return the embedding tensor for use in MaxSim reranking.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:37.969214569-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:54:06.175840305-03:00","closed_at":"2026-02-04T14:54:06.175840305-03:00","close_reason":"Already implemented in docbert-3g2: ModelManager::encode_query() calls model.encode(\u0026[query], true) and returns the Tensor","dependencies":[{"issue_id":"docbert-ldt","depends_on_id":"docbert-3g2","type":"blocks","created_at":"2026-02-04T14:23:04.733220455-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-ldt","depends_on_id":"docbert-hw7","type":"parent-child","created_at":"2026-02-04T14:23:21.208303722-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-m3z","title":"Add docbert-cuda package variant with CUDA dependencies","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T15:31:13.875068484-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:43:49.667577751-03:00","closed_at":"2026-02-04T15:43:49.667577751-03:00","close_reason":"Added docbert-cuda package with cuda feature flag, cudatoolkit, and cudnn dependencies; also set allowUnfree for CUDA support"}
{"id":"docbert-m8i","title":"Implement document deletion from Tantivy","description":"Implement removal of documents from the Tantivy index. Delete by doc_id term. Support deleting all documents for a given collection (for collection remove). Ensure commit after deletion batch.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:45.988385908-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:53:47.710461326-03:00","closed_at":"2026-02-04T14:53:47.710461326-03:00","close_reason":"Already implemented in docbert-3jp: SearchIndex::delete_document() by doc_id term and delete_collection() by collection term","dependencies":[{"issue_id":"docbert-m8i","depends_on_id":"docbert-3jp","type":"blocks","created_at":"2026-02-04T14:22:58.240351341-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-m8i","depends_on_id":"docbert-129","type":"parent-child","created_at":"2026-02-04T14:23:01.606028909-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-mdm","title":"Batch redb write transactions during ingestion","description":"config_db.rs opens a separate write transaction for every set_document_metadata(), remove_document_metadata(), etc. During rebuild of 10k files this means ~40k individual transactions. Add batch write methods that accept multiple operations in a single transaction.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:05:04.61948609-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:10:36.788201902-03:00","closed_at":"2026-02-04T16:10:36.788201902-03:00","close_reason":"Added batch_remove, batch_set, batch_store methods to ConfigDb and EmbeddingDb. Refactored collection_remove, cmd_rebuild, embed_and_store, and store_metadata to use single-transaction batch writes."}
{"id":"docbert-nue","title":"Add docbert-mkl nix package variant for SIMD-accelerated CPU inference","description":"candle-core and pylate-rs support MKL (Intel Math Kernel Library) which enables AVX-512/AVX2 optimized linear algebra. Add a packages.docbert-mkl variant in flake.nix using mkDocbert with extraFeatures=[\"mkl\"] and mkl as a build dependency. This gives 2-3x speedup on matrix operations (matmul, reductions) for free.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:05:05.215909632-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:21:23.787747867-03:00","closed_at":"2026-02-04T16:21:23.787747867-03:00","close_reason":"Added target-cpu=native via .cargo/config.toml and RUSTFLAGS in flake.nix mkDocbert builder. This enables LLVM auto-vectorization (AVX2/AVX-512) for all CPU code, complementing candle-core's existing runtime SIMD dispatch via GEMM/pulp. Removed the separate docbert-mkl package — the default build now uses native SIMD."}
{"id":"docbert-o60","title":"Implement directory walker for document discovery","description":"Implement a recursive directory walker that discovers all eligible files in a collection directory. Initially support .txt and .md files. Return a list of (relative_path, absolute_path, mtime) tuples. Skip hidden files/directories (starting with dot). Skip symlink cycles.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:33.489743805-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:55:01.202173767-03:00","closed_at":"2026-02-04T14:55:01.202173767-03:00","close_reason":"Implemented directory walker: recursive traversal, .md/.txt support, skips hidden files/dirs, symlink cycle prevention, sorted results, 7 tests","dependencies":[{"issue_id":"docbert-o60","depends_on_id":"docbert-2bk","type":"blocks","created_at":"2026-02-04T14:22:53.869110323-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-odt","title":"Set up redb embeddings database","description":"Create the embeddings.redb database with a single table: embeddings (u64-\u003e\u0026[u8]). Provide an EmbeddingDb struct with methods to store and retrieve embedding matrices. The binary format: 4 bytes token count (u32 LE), 4 bytes dimension (u32 LE), then T*D*4 bytes of f32 LE data. Use insert_reserve for zero-copy writes.","status":"closed","priority":0,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:42.151824097-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:39:38.640454254-03:00","closed_at":"2026-02-04T14:39:38.640454254-03:00","close_reason":"Implemented EmbeddingDb with zero-copy store via insert_reserve, load, remove, list_ids, and EmbeddingMatrix accessor","dependencies":[{"issue_id":"docbert-odt","depends_on_id":"docbert-hde","type":"blocks","created_at":"2026-02-04T14:23:02.078529706-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-odt","depends_on_id":"docbert-79s","type":"blocks","created_at":"2026-02-04T14:23:03.90760808-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-ovv","title":"Benchmark jina-colbert-v2 and tune chunking","description":"Run a small corpus benchmark with the exported jina-colbert-v2 model, compare quality/latency to GTE-ModernColBERT, and decide if chunk sizing/pool_factor should be configurable.","status":"closed","priority":3,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-06T16:11:00.805616383-03:00","created_by":"Cainã Costa","updated_at":"2026-02-08T12:19:32.179087271-03:00","closed_at":"2026-02-08T12:19:32.179087271-03:00","close_reason":"Closed per user request"}
{"id":"docbert-q53","title":"Set up redb config database","description":"Create the config.redb database with table definitions for: collections (str-\u003estr), contexts (str-\u003estr), document_metadata (u64-\u003e\u0026[u8]), and settings (str-\u003estr). Provide a ConfigDb struct with methods to open or create the database. Add serde and serde_json dependencies.","status":"closed","priority":0,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:38.371048125-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:38:22.29971349-03:00","closed_at":"2026-02-04T14:38:22.29971349-03:00","close_reason":"Implemented ConfigDb with CRUD for collections, contexts, document_metadata, and settings tables","dependencies":[{"issue_id":"docbert-q53","depends_on_id":"docbert-hde","type":"blocks","created_at":"2026-02-04T14:22:58.626780002-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-q53","depends_on_id":"docbert-79s","type":"blocks","created_at":"2026-02-04T14:23:00.407612391-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-qg6","title":"Batch embedding loading in reranker","description":"Reranker loads embeddings one at a time (reranker.rs:34-51). Implement batch_load method in embedding_db and use it in reranker for 2-5x faster reranking on large candidate sets.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T23:41:24.150450902-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T23:42:47.10034572-03:00","closed_at":"2026-02-04T23:42:47.10034572-03:00","close_reason":"Implemented batch_load in embedding_db and batch_load_embedding_tensors in embedding.rs, updated reranker to use batch loading"}
{"id":"docbert-qw4","title":"Search Command","description":"Implement the docbert search command that ties together Tantivy first-stage retrieval and ColBERT reranking, with output formatting (human, JSON, file-list).","status":"closed","priority":1,"issue_type":"epic","owner":"me@cfcosta.com","created_at":"2026-02-04T14:21:24.919342712-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:10:16.46382591-03:00","closed_at":"2026-02-04T15:10:16.46382591-03:00","close_reason":"Closed"}
{"id":"docbert-tx3","title":"Implement document ingestion into Tantivy","description":"Implement adding documents to the Tantivy index. For each document: extract title (first markdown heading or filename), read body text, generate document IDs, build a Tantivy document with all schema fields, add to IndexWriter. Support batch commits. Handle updates by deleting the old entry (by doc_id term) before adding the new one.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:34.740107633-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:56:06.802988168-03:00","closed_at":"2026-02-04T14:56:06.802988168-03:00","close_reason":"Implemented document ingestion: title extraction from markdown headings, DocumentId generation, batch Tantivy ingestion with upsert, 5 tests","dependencies":[{"issue_id":"docbert-tx3","depends_on_id":"docbert-3jp","type":"blocks","created_at":"2026-02-04T14:22:58.113304452-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-tx3","depends_on_id":"docbert-129","type":"parent-child","created_at":"2026-02-04T14:23:01.484458223-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-tx3","depends_on_id":"docbert-o60","type":"blocks","created_at":"2026-02-04T14:25:11.690534382-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-tx3","depends_on_id":"docbert-yuh","type":"blocks","created_at":"2026-02-04T14:25:11.788714642-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-v69","title":"Refactor flake.nix: extract common package builder function","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T15:31:13.758980844-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:43:02.614369388-03:00","closed_at":"2026-02-04T15:43:02.614369388-03:00","close_reason":"Extracted mkDocbert builder function in flake.nix; packages.default and packages.docbert now both use it"}
{"id":"docbert-w91","title":"Parallelize file I/O in ingestion pipeline","description":"walker.rs:26-82 and ingestion.rs:47-69 read files sequentially with no parallelism. Add rayon for parallel file discovery and reading. This is a straightforward parallelization win for large document sets.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:05:04.725206617-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:12:39.839721398-03:00","closed_at":"2026-02-04T16:12:39.839721398-03:00","close_reason":"Added rayon. Parallelized file reading in both ingest_files (ingestion.rs) and the embedding collection loop in cmd_rebuild (main.rs). File I/O happens in parallel via par_iter, then sequential operations (IndexWriter, embedding) happen after."}
{"id":"docbert-wdf","title":"Implement docbert multi-get command","description":"Implement 'docbert multi-get \u003cpattern\u003e'. Apply the glob pattern against relative paths across all collections (or a specific one with -c). Use the globset crate for pattern matching. Return matching documents. Support --json, --files, and --full output modes.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:23:57.585075875-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:09:15.599536448-03:00","closed_at":"2026-02-04T15:09:15.599536448-03:00","close_reason":"Closed","dependencies":[{"issue_id":"docbert-wdf","depends_on_id":"docbert-bh2","type":"blocks","created_at":"2026-02-04T14:25:12.188443425-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-wdf","depends_on_id":"docbert-q53","type":"blocks","created_at":"2026-02-04T14:25:12.285010606-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-wqh","title":"Add end-to-end integration test with ColBERT model download, indexing, embedding, and search","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:33:51.496875302-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:40:44.592187928-03:00","closed_at":"2026-02-04T16:40:44.592187928-03:00","close_reason":"Closed"}
{"id":"docbert-xa1","title":"Add MCP semantic_search tool","description":"Expose MCP semantic_search that performs ColBERT-only search across all documents.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-08T12:02:09.324366381-03:00","created_by":"Cainã Costa","updated_at":"2026-02-08T12:16:28.082503016-03:00","closed_at":"2026-02-08T12:16:28.082503016-03:00","close_reason":"Completed"}
{"id":"docbert-xyh","title":"Add unit tests for search pipeline (BM25-only mode)","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T16:33:51.403537825-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T16:34:54.533143349-03:00","closed_at":"2026-02-04T16:34:54.533143349-03:00","close_reason":"Closed"}
{"id":"docbert-ysd","title":"Document Retrieval Commands","description":"Implement docbert get and docbert multi-get commands for retrieving document content by ID, path, or glob pattern.","status":"closed","priority":2,"issue_type":"epic","owner":"me@cfcosta.com","created_at":"2026-02-04T14:21:25.011757225-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:10:16.470884744-03:00","closed_at":"2026-02-04T15:10:16.470884744-03:00","close_reason":"Closed"}
{"id":"docbert-yuh","title":"Implement document ID generation","description":"Implement a function to generate stable document IDs from (collection_name, relative_path). Use a stable hash (e.g., xxhash or SipHash) to produce a u64 numeric ID. Derive a short hex string ID (first 6 chars). Handle collisions by extending the short ID length. Provide both ID types in a DocumentId struct.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:50.457336413-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:36:51.885685578-03:00","closed_at":"2026-02-04T14:36:51.885685578-03:00","close_reason":"Implemented DocumentId struct with deterministic hashing and extensible short hex IDs","dependencies":[{"issue_id":"docbert-yuh","depends_on_id":"docbert-hde","type":"blocks","created_at":"2026-02-04T14:23:07.398561559-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-z3x","title":"Add Cargo feature flags for SIMD backends","description":"Add feature flags to docbert's Cargo.toml that forward to pylate-rs backends: mkl (Intel AVX/AVX-512), accelerate (Apple NEON), metal (Apple GPU), cuda (NVIDIA GPU). Document the flags in README and docs. Ensure the default build (no features) works on any platform.","status":"closed","priority":3,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:50.239378427-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:52:35.714798197-03:00","closed_at":"2026-02-04T14:52:35.714798197-03:00","close_reason":"Feature flags already added in Cargo.toml: mkl, accelerate, metal, cuda forwarding to pylate-rs backends","dependencies":[{"issue_id":"docbert-z3x","depends_on_id":"docbert-hw7","type":"parent-child","created_at":"2026-02-04T14:23:21.218272026-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-z6q","title":"Implement MaxSim reranking","description":"Implement the MaxSim reranking step. Given query embeddings [32, 128] and a list of candidate document IDs: load each document's embedding matrix from embeddings.redb, compute the similarity matrix (query @ doc.T), take row-wise max, sum to get the MaxSim score. Sort candidates by score descending. Use model.similarity() from pylate-rs or implement directly for more control.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:42.352243494-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T14:58:05.136090945-03:00","closed_at":"2026-02-04T14:58:05.136090945-03:00","close_reason":"Implemented MaxSim reranking: matmul-based similarity, row-wise max, sum score, sorted results, skip missing embeddings, 5 tests","dependencies":[{"issue_id":"docbert-z6q","depends_on_id":"docbert-ldt","type":"blocks","created_at":"2026-02-04T14:23:04.837950885-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-z6q","depends_on_id":"docbert-hw7","type":"parent-child","created_at":"2026-02-04T14:23:21.211963438-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-zgk","title":"Implement human-readable search output","description":"Format search results for terminal display. Show: rank number, score (3 decimal places), collection:path, short doc ID (#abc123). Extract a text snippet around matching terms (2-3 lines of context). Respect --quiet flag (less output) and NO_COLOR env var.","status":"closed","priority":1,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:23:57.640259129-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:01:56.78091994-03:00","closed_at":"2026-02-04T15:01:56.78091994-03:00","close_reason":"Implemented human-readable output in search::format_human()","dependencies":[{"issue_id":"docbert-zgk","depends_on_id":"docbert-cne","type":"blocks","created_at":"2026-02-04T14:24:16.996946605-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-zgk","depends_on_id":"docbert-qw4","type":"parent-child","created_at":"2026-02-04T14:24:27.304101376-03:00","created_by":"Cainã Costa"}]}
{"id":"docbert-zyf","title":"Update docs to reflect 4096 token default","description":"Ensure docs mention the new conservative 4096 token default chunk size and its implications.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-08T11:50:46.208946127-03:00","created_by":"Cainã Costa","updated_at":"2026-02-08T11:50:51.006318396-03:00","closed_at":"2026-02-08T11:50:51.006318396-03:00","close_reason":"Docs updated"}
{"id":"docbert-zyn","title":"Implement fuzzy matching integration","description":"Add fuzzy matching to the search pipeline. For each significant query term, create a FuzzyTermQuery with Levenshtein distance 1 and transposition cost 1. Combine fuzzy results with BM25 results using a BooleanQuery (OR). Respect the --no-fuzzy flag to skip this. Ensure deduplication of results.","status":"closed","priority":2,"issue_type":"task","owner":"me@cfcosta.com","created_at":"2026-02-04T14:22:43.176560643-03:00","created_by":"Cainã Costa","updated_at":"2026-02-04T15:06:59.637983848-03:00","closed_at":"2026-02-04T15:06:59.637985418-03:00","dependencies":[{"issue_id":"docbert-zyn","depends_on_id":"docbert-8qu","type":"blocks","created_at":"2026-02-04T14:22:58.197408642-03:00","created_by":"Cainã Costa"},{"issue_id":"docbert-zyn","depends_on_id":"docbert-129","type":"parent-child","created_at":"2026-02-04T14:23:01.56604304-03:00","created_by":"Cainã Costa"}]}
